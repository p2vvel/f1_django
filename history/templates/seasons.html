{% extends 'base.html' %}

{% block content %}

<h1>
    {{season}}
</h1>
<h1>
    {% if finished %}
        <sub>FINISHED</sub>
    {% else %}
        <sub>{{organized_races}}/{{total_races}}</sub>
    {% endif %}
</h1>

{% if previous_season %}
    <p>
        <a href={% url "history:season_details" pk=previous_season.year %}>Previous season({{previous_season.year}})</a>
    </p>
{% endif %}

{% if next_season %}
    <p>
        <a href={% url "history:season_details" pk=next_season.year %}>Next season({{next_season.year}})</a>
    </p>
{% endif %}




{% if drivers_classification %}

<table>
    <tr>
    <td>
        Driver
    </td>
    {% for race in races %}
        <th>
            <a href={%url "history:race_details" pk=race.pk %}> {{race.circuit.country}}</a>
        </th>
    {% endfor %}
    </tr>
    {% for driver, driver_races in drivers_classification %}
    <tr>
        <th>
            <a href={% url "history:driver_details" nick=driver.nickname %}>{{driver}}</a>
        </th>
        {% for race in driver_races %}
            {% if race %}
                <td>{{race.position_info}}</td>
            {% else %}
                <td>-</td>
            {% endif %}            
        {% endfor %}
    </tr>
    {% endfor %}
</table>

{% endif %}






{% if drivers %}
    <h3>Drivers</h3>
    <table>
        <tr>
            <th>Position</th>
            <th>Driver</th>
            <th>Points</th>
        </tr>
        {% for k in drivers %}
        <tr>
            <td>
                {{k.position}}
            </td>
            <td>
                <a href={%url "history:driver_details" nick=k.driver.nickname %}>
                    {{k.driver}}
                </a>
            </td>
            <td>
                {{k.points|floatformat}}
            </td>
        </tr>
        {% endfor %}
    </table>
{% endif %}



{% if constructors %}
    <h3>Constructors</h3>
    <table>
        <tr>
            <th>Position</th>
            <th>Constructor</th>
            <th>Points</th>
        </tr>
        {% for k in constructors %}
        <tr>
            <td>
                {{k.position}}
            </td>
            <td>
                <a href={%url "history:constructor_details" nick=k.constructor.nickname %}>
                    {{k.constructor.name}}
                </a>
            </td>
            <td>
                {{k.points|floatformat}}
            </td>
        </tr>
        {% endfor %}
    </table>
{% endif %}




{% endblock content %}